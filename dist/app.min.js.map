{"version":3,"sources":["app/app.ts","auth/auth.ts","auth/controllers/authrequired.ts","auth/controllers/login.ts","auth/controllers/logout.ts","auth/controllers/main.ts","auth/controllers/master.ts","auth/controllers/passwordchange.ts","auth/controllers/passwordreset.ts","auth/controllers/passwordresetconfirm.ts","auth/controllers/register.ts","auth/controllers/restricted.ts","auth/controllers/userprofile.ts","auth/controllers/verifyemail.ts","auth/services/djangoAuth.ts","auth/services/validate.ts","templates.ts"],"names":["angular","module","config","$routeProvider","when","templateUrl","controller","resolve","authenticated","djangoAuth","authenticationStatus","otherwise","redirectTo","run","initialize","$scope","awesomeThings","$location","Validate","model","username","password","complete","login","formData","errors","form_validation","$invalid","then","data","path","logout","$cookies","prompt","handleSuccess","handleError","resetPassword","register","verify","goVerify","changePassword","profile","updateProfile","first_name","last_name","email","confirmReset","goConfirmReset","response","show_login","$on","ev","current","previous","rejection","console","error","replace","new_password1","new_password2","$routeParams","password1","password2","success","failure","service","$q","$http","$rootScope","API_URL","use_session","authPromise","request","args","get","defaults","headers","common","Authorization","params","deferred","defer","url","this","method","withCredentials","toUpperCase","X-CSRFToken","bind","status","log","reject","promise","more","extend","key","put","$broadcast","remove","uid","token","restrict","force","da","getAuthStatus","sessions","message","minlength","maxlength","required","more_messages","demo","check_more_messages","name","validation_messages","field","form","error_bin","messages","e","$error","special_message","push","deduped_messages","forEach","el","i","indexOf","substr","$templateCache"],"mappings":"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","file":"app.min.js","sourcesContent":["/// <reference path=\"../../../typings/main.d.ts\" />\n\nangular.module('ebagis', [\n    'app.templates',\n    'auth'\n]);\n\n// your app setup here\n","'use strict';\n\nangular.module('auth', [\n  'app.templates',\n  'ngCookies',\n  'ngResource',\n  'ngSanitize',\n  'ngRoute',\n])\n  .config(function ($routeProvider) {\n    $routeProvider\n      .when('/', {\n      templateUrl: 'app-templates/auth/views/main.html',\n        controller: 'MainCtrl',\n        resolve: {\n          authenticated: ['djangoAuth', function(djangoAuth){\n            return djangoAuth.authenticationStatus();\n          }],\n        }\n      })\n      .when('/register', {\n        templateUrl: 'app-templates/auth/views/register.html',\n        resolve: {\n          authenticated: ['djangoAuth', function(djangoAuth){\n            return djangoAuth.authenticationStatus();\n          }],\n        }\n      })\n      .when('/passwordReset', {\n        templateUrl: 'app-templates/auth/views/passwordreset.html',\n        resolve: {\n          authenticated: ['djangoAuth', function(djangoAuth){\n            return djangoAuth.authenticationStatus();\n          }],\n        }\n      })\n      .when('/passwordResetConfirm/:firstToken/:passwordResetToken', {\n        templateUrl: 'app-templates/auth/views/passwordresetconfirm.html',\n        resolve: {\n          authenticated: ['djangoAuth', function(djangoAuth){\n            return djangoAuth.authenticationStatus();\n          }],\n        }\n      })\n      .when('/login', {\n        templateUrl: 'app-templates/auth/views/login.html',\n        resolve: {\n          authenticated: ['djangoAuth', function(djangoAuth){\n            return djangoAuth.authenticationStatus();\n          }],\n        }\n      })\n      .when('/verifyEmail/:emailVerificationToken', {\n        templateUrl: 'app-templates/auth/views/verifyemail.html',\n        resolve: {\n          authenticated: ['djangoAuth', function(djangoAuth){\n            return djangoAuth.authenticationStatus();\n          }],\n        }\n      })\n      .when('/logout', {\n        templateUrl: 'app-templates/auth/views/logout.html',\n        resolve: {\n          authenticated: ['djangoAuth', function(djangoAuth){\n            return djangoAuth.authenticationStatus();\n          }],\n        }\n      })\n      .when('/userProfile', {\n        templateUrl: 'app-templates/auth/views/userprofile.html',\n        resolve: {\n          authenticated: ['djangoAuth', function(djangoAuth){\n            return djangoAuth.authenticationStatus();\n          }],\n        }\n      })\n      .when('/passwordChange', {\n        templateUrl: 'app-templates/auth/views/passwordchange.html',\n        resolve: {\n          authenticated: ['djangoAuth', function(djangoAuth){\n            return djangoAuth.authenticationStatus();\n          }],\n        }\n      })\n      .when('/restricted', {\n        templateUrl: 'app-templates/auth/views/restricted.html',\n        controller: 'RestrictedCtrl',\n        resolve: {\n          authenticated: ['djangoAuth', function(djangoAuth){\n            return djangoAuth.authenticationStatus();\n          }],\n        }\n      })\n      .when('/authRequired', {\n        templateUrl: 'app-templates/auth/views/authrequired.html',\n        controller: 'AuthrequiredCtrl',\n        resolve: {\n          authenticated: ['djangoAuth', function(djangoAuth){\n            return djangoAuth.authenticationStatus(true);\n          }],\n        }\n      })\n      .otherwise({\n        redirectTo: '/'\n      });\n  })\n  .run(function(djangoAuth){\n  djangoAuth.initialize('https://test.ebagis.geog.pdx.edu/api/rest/account', false);\n  });\n","'use strict';\n\n/**\n * @ngdoc function\n * @name angularDjangoRegistrationAuthApp.controller:AuthrequiredCtrl\n * @description\n * # AuthrequiredCtrl\n * Controller of the angularDjangoRegistrationAuthApp\n */\nangular.module('auth')\n  .controller('AuthrequiredCtrl', function ($scope) {\n    $scope.awesomeThings = [\n      'HTML5 Boilerplate',\n      'AngularJS',\n      'Karma'\n    ];\n  });\n","'use strict';\n\nangular.module('auth')\n  .controller('LoginCtrl', function ($scope, $location, djangoAuth, Validate) {\n    $scope.model = {'username':'','password':''};\n  \t$scope.complete = false;\n    $scope.login = function(formData){\n      $scope.errors = [];\n      Validate.form_validation(formData,$scope.errors);\n      if(!formData.$invalid){\n        djangoAuth.login($scope.model.username, $scope.model.password)\n        .then(function(data){\n        \t// success case\n        \t$location.path(\"/\");\n        },function(data){\n        \t// error case\n        \t$scope.errors = data;\n        });\n      }\n    }\n  });\n","'use strict';\n\nangular.module('auth')\n  .controller('LogoutCtrl', function ($scope, $location, djangoAuth) {\n    djangoAuth.logout();\n  });\n","'use strict';\n\nangular.module('auth')\n  .controller('MainCtrl', function ($scope, $cookies, $location, djangoAuth) {\n    \n    $scope.login = function(){\n      djangoAuth.login(prompt('Username'),prompt('password'))\n      .then(function(data){\n        handleSuccess(data);\n      },handleError);\n    }\n    \n    $scope.logout = function(){\n      djangoAuth.logout()\n      .then(handleSuccess,handleError);\n    }\n    \n    $scope.resetPassword = function(){\n      djangoAuth.resetPassword(prompt('Email'))\n      .then(handleSuccess,handleError);\n    }\n    \n    $scope.register = function(){\n      djangoAuth.register(prompt('Username'),prompt('Password'),prompt('Email'))\n      .then(handleSuccess,handleError);\n    }\n    \n    $scope.verify = function(){\n      djangoAuth.verify(prompt(\"Please enter verification code\"))\n      .then(handleSuccess,handleError);\n    }\n    \n    $scope.goVerify = function(){\n      $location.path(\"/verifyEmail/\"+prompt(\"Please enter verification code\"));\n    }\n    \n    $scope.changePassword = function(){\n      djangoAuth.changePassword(prompt(\"Password\"), prompt(\"Repeat Password\"))\n      .then(handleSuccess,handleError);\n    }\n    \n    $scope.profile = function(){\n      djangoAuth.profile()\n      .then(handleSuccess,handleError);\n    }\n    \n    $scope.updateProfile = function(){\n      djangoAuth.updateProfile({'first_name': prompt(\"First Name\"), 'last_name': prompt(\"Last Name\"), 'email': prompt(\"Email\")})\n      .then(handleSuccess,handleError);\n    }\n    \n    $scope.confirmReset = function(){\n      djangoAuth.confirmReset(prompt(\"Code 1\"), prompt(\"Code 2\"), prompt(\"Password\"), prompt(\"Repeat Password\"))\n      .then(handleSuccess,handleError);\n    }\n\n    $scope.goConfirmReset = function(){\n      $location.path(\"/passwordResetConfirm/\"+prompt(\"Code 1\")+\"/\"+prompt(\"Code 2\"))\n    }\n    \n    var handleSuccess = function(data){\n      $scope.response = data;\n    }\n    \n    var handleError = function(data){\n      $scope.response = data;\n    }\n\n    $scope.show_login = true;\n    $scope.$on(\"djangoAuth.logged_in\", function(data){\n      $scope.show_login = false;\n    });\n    $scope.$on(\"djangoAuth.logged_out\", function(data){\n      $scope.show_login = true;\n    });\n\n  });\n","'use strict';\n\nangular.module('auth')\n  .controller('MasterCtrl', function ($scope, $location, djangoAuth) {\n    // Assume user is not logged in until we hear otherwise\n    $scope.authenticated = false;\n    // Wait for the status of authentication, set scope var to true if it resolves\n    djangoAuth.authenticationStatus(true).then(function(){\n        $scope.authenticated = true;\n    });\n    // Wait and respond to the logout event.\n    $scope.$on('djangoAuth.logged_out', function() {\n      $scope.authenticated = false;\n    });\n    // Wait and respond to the log in event.\n    $scope.$on('djangoAuth.logged_in', function() {\n      $scope.authenticated = true;\n    });\n    // If the user attempts to access a restricted page, redirect them back to the main page.\n    $scope.$on('$routeChangeError', function(ev, current, previous, rejection){\n      console.error(\"Unable to change routes.  Error: \", rejection)\n      $location.path('/restricted').replace();\n    });\n  });\n","'use strict';\n\nangular.module('auth')\n  .controller('PasswordchangeCtrl', function ($scope, djangoAuth, Validate) {\n    $scope.model = {'new_password1':'','new_password2':''};\n  \t$scope.complete = false;\n    $scope.changePassword = function(formData){\n      $scope.errors = [];\n      Validate.form_validation(formData,$scope.errors);\n      if(!formData.$invalid){\n        djangoAuth.changePassword($scope.model.new_password1, $scope.model.new_password2)\n        .then(function(data){\n        \t// success case\n        \t$scope.complete = true;\n        },function(data){\n        \t// error case\n        \t$scope.errors = data;\n        });\n      }\n    }\n  });\n","'use strict';\n\nangular.module('auth')\n  .controller('PasswordresetCtrl', function ($scope, djangoAuth, Validate) {\n    $scope.model = {'email':''};\n  \t$scope.complete = false;\n    $scope.resetPassword = function(formData){\n      $scope.errors = [];\n      Validate.form_validation(formData,$scope.errors);\n      if(!formData.$invalid){\n        djangoAuth.resetPassword($scope.model.email)\n        .then(function(data){\n        \t// success case\n        \t$scope.complete = true;\n        },function(data){\n        \t// error case\n        \t$scope.errors = data;\n        });\n      }\n    }\n  });\n","'use strict';\n\nangular.module('auth')\n  .controller('PasswordresetconfirmCtrl', function ($scope, $routeParams, djangoAuth, Validate) {\n    $scope.model = {'new_password1':'','new_password2':''};\n  \t$scope.complete = false;\n    $scope.confirmReset = function(formData){\n      $scope.errors = [];\n      Validate.form_validation(formData,$scope.errors);\n      if(!formData.$invalid){\n        djangoAuth.confirmReset($routeParams['firstToken'], $routeParams['passwordResetToken'], $scope.model.new_password1, $scope.model.new_password2)\n        .then(function(data){\n        \t// success case\n        \t$scope.complete = true;\n        },function(data){\n        \t// error case\n        \t$scope.errors = data;\n        });\n      }\n    }\n  });\n","'use strict';\n\nangular.module('auth')\n  .controller('RegisterCtrl', function ($scope, djangoAuth, Validate) {\n  \t$scope.model = {'username':'','password':'','email':''};\n  \t$scope.complete = false;\n    $scope.register = function(formData){\n      $scope.errors = [];\n      Validate.form_validation(formData,$scope.errors);\n      if(!formData.$invalid){\n        djangoAuth.register($scope.model.username,$scope.model.password1,$scope.model.password2,$scope.model.email)\n        .then(function(data){\n        \t// success case\n        \t$scope.complete = true;\n        },function(data){\n        \t// error case\n        \t$scope.errors = data;\n        });\n      }\n    }\n  });\n","'use strict';\n\n/**\n * @ngdoc function\n * @name angularDjangoRegistrationAuthApp.controller:RestrictedCtrl\n * @description\n * # RestrictedCtrl\n * Controller of the angularDjangoRegistrationAuthApp\n */\nangular.module('auth')\n  .controller('RestrictedCtrl', function ($scope, $location) {\n    $scope.$on('djangoAuth.logged_in', function() {\n      $location.path('/');\n    });\n  });\n","'use strict';\n\nangular.module('auth')\n  .controller('UserprofileCtrl', function ($scope, djangoAuth, Validate) {\n    $scope.model = {'first_name':'','last_name':'','email':''};\n  \t$scope.complete = false;\n  \tdjangoAuth.profile().then(function(data){\n  \t\t$scope.model = data;\n  \t});\n    $scope.updateProfile = function(formData, model){\n      $scope.errors = [];\n      Validate.form_validation(formData,$scope.errors);\n      if(!formData.$invalid){\n        djangoAuth.updateProfile(model)\n        .then(function(data){\n        \t// success case\n        \t$scope.complete = true;\n        },function(data){\n        \t// error case\n        \t$scope.error = data;\n        });\n      }\n    }\n  });\n","'use strict';\n\nangular.module('auth')\n  .controller('VerifyemailCtrl', function ($scope, $routeParams, djangoAuth) {\n    djangoAuth.verify($routeParams[\"emailVerificationToken\"]).then(function(data){\n    \t$scope.success = true;\n    },function(data){\n    \t$scope.failure = false;\n    });\n  });\n","'use strict';\n\nangular.module('auth')\n  .service('djangoAuth', function djangoAuth($q, $http, $cookies, $rootScope) {\n    // AngularJS will instantiate a singleton by calling \"new\" on this function\n    var service = {\n        /* START CUSTOMIZATION HERE */\n        // Change this to point to your Django REST Auth API\n        // e.g. /api/rest-auth  (DO NOT INCLUDE ENDING SLASH)\n        'API_URL': '/api/rest/account',\n        // Set use_session to true to use Django sessions to store security token.\n        // Set use_session to false to store the security token locally and transmit it as a custom header.\n        'use_session': false,\n        /* END OF CUSTOMIZATION */\n        'authenticated': null,\n        'authPromise': null,\n        'request': function(args) {\n            // Let's retrieve the token from the cookie, if available\n            if($cookies.get('token')){\n                $http.defaults.headers.common.Authorization = 'Token ' + $cookies.get('token');\n            }\n            // Continue\n            params = args.params || {}\n            args = args || {};\n            var deferred = $q.defer(),\n                url = this.API_URL + args.url,\n                method = args.method || \"GET\",\n                params = params,\n                data = args.data || {};\n            // Fire the request, as configured.\n            $http({\n                url: url,\n                withCredentials: this.use_session,\n                method: method.toUpperCase(),\n                headers: {'X-CSRFToken': $cookies['csrftoken']},\n                params: params,\n                data: data\n            })\n            .success(angular.bind(this,function(data, status, headers, config) {\n                deferred.resolve(data, status);\n            }))\n            .error(angular.bind(this,function(data, status, headers, config) {\n                console.log(\"error syncing with: \" + url);\n                // Set request status\n                if(data){\n                    data.status = status;\n                }\n                if(status == 0){\n                    if(data == \"\"){\n                        data = {};\n                        data['status'] = 0;\n                        data['non_field_errors'] = [\"Could not connect. Please try again.\"];\n                    }\n                    // or if the data is null, then there was a timeout.\n                    if(data == null){\n                        // Inject a non field error alerting the user\n                        // that there's been a timeout error.\n                        data = {};\n                        data['status'] = 0;\n                        data['non_field_errors'] = [\"Server timed out. Please try again.\"];\n                    }\n                }\n                deferred.reject(data, status, headers, config);\n            }));\n            return deferred.promise;\n        },\n        'register': function(username,password1,password2,email,more){\n            var data = {\n                'username':username,\n                'password1':password1,\n                'password2':password2,\n                'email':email\n            }\n            data = angular.extend(data,more);\n            return this.request({\n                'method': \"POST\",\n                'url': \"/registration/\",\n                'data' :data\n            });\n        },\n        'login': function(username,password){\n            var djangoAuth = this;\n            return this.request({\n                'method': \"POST\",\n                'url': \"/login/\",\n                'data':{\n                    'username':username,\n                    'password':password\n                }\n            }).then(function(data){\n                if(!djangoAuth.use_session){\n                    $http.defaults.headers.common.Authorization = 'Token ' + data.key;\n                    $cookies.put(\"token\", data.key);\n                }\n                djangoAuth.authenticated = true;\n                $rootScope.$broadcast(\"djangoAuth.logged_in\", data);\n            });\n        },\n        'logout': function(){\n            var djangoAuth = this;\n            return this.request({\n                'method': \"POST\",\n                'url': \"/logout/\"\n            }).then(function(data){\n            delete $http.defaults.headers.common.Authorization;\n                $cookies.remove('token');\n                djangoAuth.authenticated = false;\n                $rootScope.$broadcast(\"djangoAuth.logged_out\");\n            });\n        },\n        'changePassword': function(password1,password2){\n            return this.request({\n                'method': \"POST\",\n                'url': \"/password/change/\",\n                'data':{\n                    'new_password1':password1,\n                    'new_password2':password2\n                }\n            });\n        },\n        'resetPassword': function(email){\n            return this.request({\n                'method': \"POST\",\n                'url': \"/password/reset/\",\n                'data':{\n                    'email':email\n                }\n            });\n        },\n        'profile': function(){\n            return this.request({\n                'method': \"GET\",\n                'url': \"/user/\"\n            }); \n        },\n        'updateProfile': function(data){\n            return this.request({\n                'method': \"PATCH\",\n                'url': \"/user/\",\n                'data':data\n            }); \n        },\n        'verify': function(key){\n            return this.request({\n                'method': \"POST\",\n                'url': \"/registration/verify-email/\",\n                'data': {'key': key} \n            });            \n        },\n        'confirmReset': function(uid,token,password1,password2){\n            return this.request({\n                'method': \"POST\",\n                'url': \"/password/reset/confirm/\",\n                'data':{\n                    'uid': uid,\n                    'token': token,\n                    'new_password1':password1,\n                    'new_password2':password2\n                }\n            });\n        },\n        'authenticationStatus': function(restrict, force){\n            // Set restrict to true to reject the promise if not logged in\n            // Set to false or omit to resolve when status is known\n            // Set force to true to ignore stored value and query API\n            restrict = restrict || false;\n            force = force || false;\n            if(this.authPromise == null || force){\n                this.authPromise = this.request({\n                    'method': \"GET\",\n                    'url': \"/user/\"\n                })\n            }\n            var da = this;\n            var getAuthStatus = $q.defer();\n            if(this.authenticated != null && !force){\n                // We have a stored value which means we can pass it back right away.\n                if(this.authenticated == false && restrict){\n                    getAuthStatus.reject(\"User is not logged in.\");\n                }else{\n                    getAuthStatus.resolve();\n                }\n            }else{\n                // There isn't a stored value, or we're forcing a request back to\n                // the API to get the authentication status.\n                this.authPromise.then(function(){\n                    da.authenticated = true;\n                    getAuthStatus.resolve();\n                },function(){\n                    da.authenticated = false;\n                    if(restrict){\n                        getAuthStatus.reject(\"User is not logged in.\");\n                    }else{\n                        getAuthStatus.resolve();\n                    }\n                });\n            }\n            return getAuthStatus.promise;\n        },\n        'initialize': function(url, sessions){\n            this.API_URL = url;\n            this.use_session = sessions;\n            return this.authenticationStatus();\n        }\n\n    }\n    return service;\n  });\n","'use strict';\n\nangular.module('auth')\n  .service('Validate', function Validate() {\n    return {\n        'message': {\n            'minlength': 'This value is not long enough.',\n            'maxlength': 'This value is too long.',\n            'email': 'A properly formatted email address is required.',\n            'required': 'This field is required.'\n        },\n        'more_messages': {\n            'demo': {\n                'required': 'Here is a sample alternative required message.'\n            }\n        },\n        'check_more_messages': function(name,error){\n            return (this.more_messages[name] || [])[error] || null;\n        },\n        validation_messages: function(field,form,error_bin){\n            var messages = [];\n            for(var e in form[field].$error){\n                if(form[field].$error[e]){\n                    var special_message = this.check_more_messages(field,e);\n                    if(special_message){\n                        messages.push(special_message);\n                    }else if(this.message[e]){\n                        messages.push(this.message[e]);\n                    }else{\n                        messages.push(\"Error: \" + e)\n                    }\n                }\n            }\n            var deduped_messages = [];\n            angular.forEach(messages, function(el, i){\n                if(deduped_messages.indexOf(el) === -1) deduped_messages.push(el);\n            });\n            if(error_bin){\n                error_bin[field] = deduped_messages;\n            }\n        },\n        'form_validation': function(form,error_bin){\n            for(var field in form){\n                if(field.substr(0,1) != \"$\"){\n                    this.validation_messages(field,form,error_bin);\n                }\n            }\n        }\n    }\n});\n",null],"sourceRoot":"/source/"}